{% extends "layout.html" %}
{% block content %}
<div class="left-panel" id="leftPanel">
  <div class="panel-toggle" id="panelToggle">â—€</div>
  <div class="panel-resize-handle" id="resizeHandle"></div>
  <pre class="banner-text">
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                             â•‘
â•‘   â–ˆâ–ˆ â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ     â•‘
â•‘   â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â•‘
â•‘   â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â•‘
â•‘   â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â•‘
â•‘   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â•‘
â•‘                             â•‘
â•‘   â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆ   â•‘
â•‘     â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ     â•‘
â•‘     â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ     â•‘
â•‘     â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ     â•‘
â•‘     â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ   â•‘
â•‘                             â•‘
â•‘        v e r s i o n        â•‘
â•‘            2 . 0            â•‘
â•‘                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  </pre>
  <ul class="menu">
    <li><a href="/">âš¡ Scanner</a></li>
    <li><a href="/dashboard">â—£ Dashboard</a></li>
    <li class="active"><a href="/reports">â—ˆ Reports</a></li>
    <li class="menu-divider">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</li>
    <li><a href="/ddos">âš  DDoS Stress Test</a></li>
    <li class="menu-divider">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</li>
    <li>â—‰ Settings</li>
  </ul>
  <div class="credit-tag">
    <span class="credit-label">crafted by</span>
    <span class="credit-name">Gowtham Darkseid</span>
  </div>
</div>
<div class="main">
  <div class="dashboard-header">
    <h1>&gt; Investigation Reports Archive</h1>
    <div class="header-line">â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</div>
  </div>

  <div class="filters">
    <input type="text" id="search" placeholder="ğŸ” Search by case ID, target, or investigator..." />
    <select id="filter-type">
      <option value="">All Types</option>
      <option value="ip">IP</option>
      <option value="email">Email</option>
      <option value="phone">Phone</option>
      <option value="username">Username</option>
      <option value="photo">Photo</option>
    </select>
  </div>

  <div class="reports-grid">
    {% for case in cases %}
    <div class="report-card" data-type="{{ case.target_type }}">
      <div class="report-header">
        <span class="case-id">{{ case.case_id }}</span>
        <span class="badge badge-{{ case.target_type }}">{{ case.target_type|upper }}</span>
      </div>
      <div class="report-body">
        <div class="report-row">
          <span class="label">Target:</span>
          <span class="value">{{ case.target }}</span>
        </div>
        <div class="report-row">
          <span class="label">Investigator:</span>
          <span class="value">{{ case.investigator }}</span>
        </div>
        <div class="report-row">
          <span class="label">Reputation Score:</span>
          <span class="score-badge score-{{ 'high' if case.reputation.score > 50 else ('medium' if case.reputation.score > 20 else 'low') }}">
            {{ case.reputation.score }}
          </span>
        </div>
        <div class="report-row">
          <span class="label">Results Found:</span>
          <span class="value">{{ case.results|length }}</span>
        </div>
        <div class="report-row">
          <span class="label">Timeline Events:</span>
          <span class="value">{{ case.timeline|length }}</span>
        </div>
      </div>
      <div class="report-footer">
        <a href="/reports/{{ case.case_id }}" class="btn-view">View Full Report â†’</a>
      </div>
    </div>
    {% endfor %}
  </div>

  {% if not cases %}
  <div class="empty-state">
    <div class="empty-icon">ğŸ“­</div>
    <p>No investigation reports found.</p>
    <a href="/" class="action-btn">â–¶ Start Your First Scan</a>
  </div>
  {% endif %}
</div>

<script>
// Simple client-side filtering
document.getElementById('search').addEventListener('input', filterReports);
document.getElementById('filter-type').addEventListener('change', filterReports);

function filterReports() {
  const searchTerm = document.getElementById('search').value.toLowerCase();
  const filterType = document.getElementById('filter-type').value;
  const cards = document.querySelectorAll('.report-card');
  
  cards.forEach(card => {
    const text = card.textContent.toLowerCase();
    const type = card.dataset.type;
    const matchesSearch = text.includes(searchTerm);
    const matchesType = !filterType || type === filterType;
    
    card.style.display = matchesSearch && matchesType ? 'block' : 'none';
  });
}
</script>
{% endblock %}
